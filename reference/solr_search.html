<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Solr search — solr_search • rOpenSci: solrium</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<!-- ropensci -->
<link href="../ropensci.css" rel="stylesheet">

<meta property="og:title" content="Solr search — solr_search" />
<meta property="og:description" content="Returns only matched documents, and doesn't return other items,
including facets, groups, mlt, stats, and highlights." />
<meta name="twitter:card" content="summary" />






<!-- Matomo -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
<script src="https://ropensci.org/scripts/matomo.js"></script>
<noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt="" /></p></noscript>

<!-- End Matomo Code -->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci" /></a>
        <a class="navbar-brand" href="../index.html"><i>solrium <small>v1.2.1.91</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cores_collections.html">Cores/collections management</a>
    </li>
    <li>
      <a href="../articles/document_management.html">Document management</a>
    </li>
    <li>
      <a href="../articles/local_setup.html">Local Solr setup</a>
    </li>
    <li>
      <a href="../articles/search.html">solr search</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/solrium/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Solr search</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/solrium/blob/master/R/solr_search.r'><code>R/solr_search.r</code></a></small>
    <div class="hidden name"><code>solr_search.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns only matched documents, and doesn't return other items,
including facets, groups, mlt, stats, and highlights.</p>
    </div>

    <pre class="usage"><span class='fu'>solr_search</span><span class='op'>(</span>
  <span class='va'>conn</span>,
  name <span class='op'>=</span> <span class='cn'>NULL</span>,
  params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>"*:*"</span><span class='op'>)</span>,
  body <span class='op'>=</span> <span class='cn'>NULL</span>,
  callopts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  raw <span class='op'>=</span> <span class='cn'>FALSE</span>,
  parsetype <span class='op'>=</span> <span class='st'>"df"</span>,
  concat <span class='op'>=</span> <span class='st'>","</span>,
  optimizeMaxRows <span class='op'>=</span> <span class='cn'>TRUE</span>,
  minOptimizedRows <span class='op'>=</span> <span class='fl'>50000L</span>,
  progress <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>conn</th>
      <td><p>A solrium connection object, see <a href='SolrClient.html'>SolrClient</a></p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>Name of a collection or core. Or leave as <code>NULL</code> if not needed.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>(list) a named list of parameters, results in a GET request
as long as no body parameters given</p></td>
    </tr>
    <tr>
      <th>body</th>
      <td><p>(list) a named list of parameters, if given a POST request
will be performed</p></td>
    </tr>
    <tr>
      <th>callopts</th>
      <td><p>Call options passed on to <a href='https://docs.ropensci.org/crul/reference/HttpClient.html'>crul::HttpClient</a></p></td>
    </tr>
    <tr>
      <th>raw</th>
      <td><p>(logical) If TRUE, returns raw data in format specified by wt param</p></td>
    </tr>
    <tr>
      <th>parsetype</th>
      <td><p>(character) One of 'list' or 'df'</p></td>
    </tr>
    <tr>
      <th>concat</th>
      <td><p>(character) Character to concatenate elements of longer than length 1.
Note that this only works reliably when data format is json (wt='json'). The parsing
is more complicated in XML format, but you can do that on your own.</p></td>
    </tr>
    <tr>
      <th>optimizeMaxRows</th>
      <td><p>(logical) If <code>TRUE</code>, then rows parameter will be
adjusted to the number of returned results by the same constraints.
It will only be applied if rows parameter is higher
than <code>minOptimizedRows</code>. Default: <code>TRUE</code></p></td>
    </tr>
    <tr>
      <th>minOptimizedRows</th>
      <td><p>(numeric) used by <code>optimizedMaxRows</code> parameter,
the minimum optimized rows. Default: 50000</p></td>
    </tr>
    <tr>
      <th>progress</th>
      <td><p>a function with logic for printing a progress
bar for an HTTP request, ultimately passed down to <span class="pkg">curl</span>. only supports
<code><a href='https://httr.r-lib.org/reference/progress.html'>httr::progress</a></code> for now. See the README for an example.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further args to be combined into query</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>XML, JSON, a list, or data.frame</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>SOLR v1.2 was first version to support csv. See
https://issues.apache.org/jira/browse/SOLR-66</p>
    <h2 class="hasAnchor" id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h2>

    

<ul>
<li><p>q Query terms, defaults to '<em>:</em>', or everything.</p></li>
<li><p>sort Field to sort on. You can specify ascending (e.g., score desc) or
descending (e.g., score asc), sort by two fields (e.g., score desc, price asc),
or sort by a function (e.g., sum(x_f, y_f) desc, which sorts by the sum of
x_f and y_f in a descending order).</p></li>
<li><p>start Record to start at, default to beginning.</p></li>
<li><p>rows Number of records to return. Default: 10.</p></li>
<li><p>pageDoc If you expect to be paging deeply into the results (say beyond page 10,
assuming rows=10) and you are sorting by score, you may wish to add the pageDoc
and pageScore parameters to your request. These two parameters tell Solr (and Lucene)
what the last result (Lucene internal docid and score) of the previous page was,
so that when scoring the query for the next set of pages, it can ignore any results
that occur higher than that item. To get the Lucene internal doc id, you will need
to add <code>docid</code> to the &amp;fl list.</p></li>
<li><p>pageScore See pageDoc notes.</p></li>
<li><p>fq Filter query, this does not affect the search, only what gets returned.
This parameter can accept multiple items in a lis or vector. You can't pass more than
one parameter of the same name, so we get around it by passing multiple queries
and we parse internally</p></li>
<li><p>fl Fields to return, can be a character vector like <code><a href='https://rdrr.io/r/base/c.html'>c('id', 'title')</a></code>,
or a single character vector with one or more comma separated names, like
<code>'id,title'</code></p></li>
<li><p>defType Specify the query parser to use with this request.</p></li>
<li><p>timeAllowed The time allowed for a search to finish. This value only applies
to the search and not to requests in general. Time is in milliseconds. Values <code>&lt;= 0</code>
mean no time restriction. Partial results may be returned (if there are any).</p></li>
<li><p>qt Which query handler used. Options: dismax, others?</p></li>
<li><p>NOW Set a fixed time for evaluating Date based expresions</p></li>
<li><p>TZ Time zone, you can override the default.</p></li>
<li><p>echoHandler If <code>TRUE</code>, Solr places the name of the handle used in the
response to the client for debugging purposes. Default:</p></li>
<li><p>echoParams The echoParams parameter tells Solr what kinds of Request
parameters should be included in the response for debugging purposes, legal values
include:</p><ul>
<li><p>none - don't include any request parameters for debugging</p></li>
<li><p>explicit - include the parameters explicitly specified by the client in the request</p></li>
<li><p>all - include all parameters involved in this request, either specified explicitly
by the client, or implicit because of the request handler configuration.</p></li>
</ul></li>
<li><p>wt (character) One of json, xml, or csv. Data type returned, defaults
to 'csv'. If json, uses <code><a href='https://rdrr.io/pkg/jsonlite/man/fromJSON.html'>jsonlite::fromJSON()</a></code> to parse. If xml,
uses <code><a href='http://xml2.r-lib.org/reference/read_xml.html'>xml2::read_xml()</a></code> to parse. If csv, uses <code><a href='https://rdrr.io/r/utils/read.table.html'>read.table()</a></code> to parse.
<code>wt=csv</code> gives the fastest performance at least in all the cases we have
tested in, thus it's the default value for <code>wt</code></p></li>
</ul>

    <h2 class="hasAnchor" id="number-of-results"><a class="anchor" href="#number-of-results"></a>number of results</h2>

    

<p>Because <code>solr_search()</code> returns a data.frame, metadata doesn't fit into the
output data.frame itself. You can access number of results (<code>numFound</code>) in
the attributes of the results. For example, <code><a href='https://rdrr.io/r/base/attr.html'>attr(x, "numFound")</a></code> for
number of results, and <code><a href='https://rdrr.io/r/base/attr.html'>attr(x, "start")</a></code> for the offset value (if one
was given). Or you can get all attributes like <code><a href='https://rdrr.io/r/base/attributes.html'>attributes(x)</a></code>. These
metadata are not in the attributes when <code>raw=TRUE</code> as those metadata
are in the payload (unless <code>wt="csv"</code>).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>See https://lucene.apache.org/solr/guide/8_2/searching.html
for more information.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='solr_highlight.html'>solr_highlight()</a></code>, <code><a href='solr_facet.html'>solr_facet()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Connect to a local Solr instance</span>
<span class='op'>(</span><span class='va'>cli</span> <span class='op'>&lt;-</span> <span class='va'><a href='SolrClient.html'>SolrClient</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>cli</span><span class='op'>$</span><span class='fu'>search</span><span class='op'>(</span><span class='st'>"gettingstarted"</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>"features:notes"</span><span class='op'>)</span><span class='op'>)</span>

<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, <span class='st'>"gettingstarted"</span><span class='op'>)</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, <span class='st'>"gettingstarted"</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>"features:notes"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, <span class='st'>"gettingstarted"</span>, body <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>query <span class='op'>=</span> <span class='st'>"features:notes"</span><span class='op'>)</span><span class='op'>)</span>

<span class='op'>(</span><span class='va'>cli</span> <span class='op'>&lt;-</span> <span class='va'><a href='SolrClient.html'>SolrClient</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>host <span class='op'>=</span> <span class='st'>"api.plos.org"</span>, path <span class='op'>=</span> <span class='st'>"search"</span>, port <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>cli</span><span class='op'>$</span><span class='fu'>search</span><span class='op'>(</span>params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>"*:*"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>cli</span><span class='op'>$</span><span class='fu'>search</span><span class='op'>(</span>params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>"title:golgi"</span>, fl <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>, <span class='st'>'title'</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>cli</span><span class='op'>$</span><span class='fu'>search</span><span class='op'>(</span>params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>"*:*"</span>, facet <span class='op'>=</span> <span class='st'>"true"</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'># search</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'*:*'</span>, rows<span class='op'>=</span><span class='fl'>2</span>, fl<span class='op'>=</span><span class='st'>'id'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># search and return all rows</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'*:*'</span>, rows<span class='op'>=</span><span class='op'>-</span><span class='fl'>1</span>, fl<span class='op'>=</span><span class='st'>'id'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Search for word ecology in title and cell in the body</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'title:"ecology" AND body:"cell"'</span>,
  fl<span class='op'>=</span><span class='st'>'title'</span>, rows<span class='op'>=</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Search for word "cell" and not "body" in the title field</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'title:"cell" -title:"lines"'</span>, fl<span class='op'>=</span><span class='st'>'title'</span>,
  rows<span class='op'>=</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Wildcards</span>
<span class='co'>## Search for word that starts with "cell" in the title field</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'title:"cell*"'</span>, fl<span class='op'>=</span><span class='st'>'title'</span>, rows<span class='op'>=</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Proximity searching</span>
<span class='co'>## Search for words "sports" and "alcohol" within four words of each other</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'everything:"sports alcohol"~7'</span>,
  fl<span class='op'>=</span><span class='st'>'abstract'</span>, rows<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Range searches</span>
<span class='co'>## Search for articles with Twitter count between 5 and 10</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'*:*'</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'alm_twitterCount'</span>,<span class='st'>'id'</span><span class='op'>)</span>,
  fq<span class='op'>=</span><span class='st'>'alm_twitterCount:[5 TO 50]'</span>, rows<span class='op'>=</span><span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Boosts</span>
<span class='co'>## Assign higher boost to title matches than to body matches</span>
<span class='co'>## (compare the two calls)</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'title:"cell" abstract:"science"'</span>,
  fl<span class='op'>=</span><span class='st'>'title'</span>, rows<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'title:"cell"^1.5 AND abstract:"science"'</span>,
  fl<span class='op'>=</span><span class='st'>'title'</span>, rows<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># FunctionQuery queries</span>
<span class='co'>## This kind of query allows you to use the actual values of fields to</span>
<span class='co'>## calculate relevancy scores for returned documents</span>

<span class='co'>## Here, we search on the product of counter_total_all and alm_twitterCount</span>
<span class='co'>## metrics for articles in PLOS Journals</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>"{!func}product($v1,$v2)"</span>,
  v1 <span class='op'>=</span> <span class='st'>'sqrt(counter_total_all)'</span>,
  v2 <span class='op'>=</span> <span class='st'>'log(alm_twitterCount)'</span>, rows<span class='op'>=</span><span class='fl'>5</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>,<span class='st'>'title'</span><span class='op'>)</span>,
  fq<span class='op'>=</span><span class='st'>'doc_type:full'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## here, search on the product of counter_total_all and alm_twitterCount,</span>
<span class='co'>## using a new temporary field "_val_"</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>,
  params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'_val_:"product(counter_total_all,alm_twitterCount)"'</span>,
  rows<span class='op'>=</span><span class='fl'>5</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>,<span class='st'>'title'</span><span class='op'>)</span>, fq<span class='op'>=</span><span class='st'>'doc_type:full'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## papers with most citations</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'_val_:"max(counter_total_all)"'</span>,
   rows<span class='op'>=</span><span class='fl'>5</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>,<span class='st'>'counter_total_all'</span><span class='op'>)</span>, fq<span class='op'>=</span><span class='st'>'doc_type:full'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## papers with most tweets</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'_val_:"max(alm_twitterCount)"'</span>,
   rows<span class='op'>=</span><span class='fl'>5</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>,<span class='st'>'alm_twitterCount'</span><span class='op'>)</span>, fq<span class='op'>=</span><span class='st'>'doc_type:full'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## many fq values</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>"*:*"</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>,<span class='st'>'alm_twitterCount'</span><span class='op'>)</span>,
   fq<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>'doc_type:full'</span>,<span class='st'>'subject:"Social networks"'</span>,
           <span class='st'>'alm_twitterCount:[100 TO 10000]'</span><span class='op'>)</span>,
   sort<span class='op'>=</span><span class='st'>'counter_total_month desc'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## using wt = csv</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'*:*'</span>, rows<span class='op'>=</span><span class='fl'>50</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>,<span class='st'>'score'</span><span class='op'>)</span>,
  fq<span class='op'>=</span><span class='st'>'doc_type:full'</span>, wt<span class='op'>=</span><span class='st'>"csv"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'*:*'</span>, rows<span class='op'>=</span><span class='fl'>50</span>, fl<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'id'</span>,<span class='st'>'score'</span><span class='op'>)</span>,
  fq<span class='op'>=</span><span class='st'>'doc_type:full'</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># using a proxy</span>
<span class='co'># cli &lt;- SolrClient$new(host = "api.plos.org", path = "search", port = NULL,</span>
<span class='co'>#   proxy = list(url = "http://186.249.1.146:80"))</span>
<span class='co'># solr_search(cli, q='*:*', rows=2, fl='id', callopts=list(verbose=TRUE))</span>

<span class='co'># Pass on curl options to modify request</span>
<span class='co'>## verbose</span>
<span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q<span class='op'>=</span><span class='st'>'*:*'</span>, rows<span class='op'>=</span><span class='fl'>2</span>, fl<span class='op'>=</span><span class='st'>'id'</span><span class='op'>)</span>,
  callopts <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>verbose<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># using a cursor for deep paging</span>
<span class='op'>(</span><span class='va'>cli</span> <span class='op'>&lt;-</span> <span class='va'><a href='SolrClient.html'>SolrClient</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>host <span class='op'>=</span> <span class='st'>"api.plos.org"</span>, path <span class='op'>=</span> <span class='st'>"search"</span>, port <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'>## json, raw data</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>'*:*'</span>, rows <span class='op'>=</span> <span class='fl'>100</span>, sort <span class='op'>=</span> <span class='st'>"id asc"</span>, cursorMark <span class='op'>=</span> <span class='st'>"*"</span><span class='op'>)</span>, 
  parsetype <span class='op'>=</span> <span class='st'>"json"</span>, raw <span class='op'>=</span> <span class='cn'>TRUE</span>, callopts<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>verbose<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>res</span>
<span class='co'>## data.frame</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>'*:*'</span>, rows <span class='op'>=</span> <span class='fl'>100</span>, sort <span class='op'>=</span> <span class='st'>"id asc"</span>, cursorMark <span class='op'>=</span> <span class='st'>"*"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>res</span>
<span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>res</span>, <span class='st'>"nextCursorMark"</span><span class='op'>)</span>
<span class='co'>## list</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>solr_search</span><span class='op'>(</span><span class='va'>cli</span>, params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>q <span class='op'>=</span> <span class='st'>'*:*'</span>, rows <span class='op'>=</span> <span class='fl'>100</span>, sort <span class='op'>=</span> <span class='st'>"id asc"</span>, cursorMark <span class='op'>=</span> <span class='st'>"*"</span><span class='op'>)</span>,
  parsetype <span class='op'>=</span> <span class='st'>"list"</span><span class='op'>)</span>
<span class='va'>res</span>
<span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>res</span>, <span class='st'>"nextCursorMark"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <!-- begin footer -->
<div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg" /></div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks & Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-solrium',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


